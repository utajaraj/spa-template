<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cotización</title>
    <style>
        html {
            -webkit-print-color-adjust: exact;
        }

        h4 {
            margin: 2px 0;
        }

        tbody tr:nth-child(even) {
            background-color: #ededed;
            color: rgb(0, 0, 0);
        }

        thead>tr>td {
            color: white;
            padding: 5px 15px;
        }

        .companyInfo {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            flex-direction: column;
            align-items: center;
        }
        
        .companyInfo,.companyInfo>*,.companyInfo>*>* {
          margin: 0;
        }

        .logoContainer {
            padding: 50px 0 20px;
        }
        .logoContainer > svg{
            width: 200px;
        }

        p {
            margin: 0 !important;
        }

        .bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgb(240,240,240);
background: linear-gradient(90deg, rgb(255, 255, 255) 0%, rgb(241, 241, 241) 48%, rgba(255,255,255,1) 100%); 
            z-index: -1;
        }
        .bg>* {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<% const fecha=new Date() %>

    <%const { reference, company_address, currency, buyer_name, buyer_last_name, client_name, expiration_date,
        user_name, user_middle_name, user_last_name, total, totalInWords, company_color, company_commercial_name,
        company_name }=quote %>

        <div class="bg">
        </div>
        <body style="padding:25px">
            <p style="color: #909090; font-size: 9px;">
                <%-fecha%> - <%-client_name%>
            </p>
            <div class="companyInfo">
                <div class="logoContainer" style="height: 100%">
                    <%-logo||""%>
                </div>
                <div>
                    <h1 style="font-size:18px;margin:0;text-align:center;color:black">
                        <%-company_name||company_commercial_name%>
                    </h1>
                    <p style="padding:15px;text-align:center;margin: 0;">Tel. 6563605285</p>
                    <h2 style="text-align:center;margin:0">Sucursales</h2>
                    <p style="padding:0 0 15px;text-align:center;margin:0">Ciudad Juárez-El Paso TX</p>
                </div>
            </div>
         
            <div style="display:flex; justify-content: space-between; padding: 35px 0;align-items: flex-end;">
                <div>
                    <p style="margin-top: 5px;">
                        <b>Nombre del cliente:</b>
                        <%-client_name%>
                    </p>
                    <p>
                        <b>Contacto:</b>
                        <%-buyer_name%>
                            <%-buyer_last_name%>
                    </p>
                    <% if(fecha){%>
                        <p>
                            <b>Fecha:</b>
                            <%-fecha.toISOString().split("T")[0].replaceAll("-"," /")%>
                        </p>

                        <%}%>
                            <% if(expiration_date){%>
                                <p>
                                    <b>Válida hasta:</b>
                                    <%-expiration_date.toISOString().split("T")[0].replaceAll("-"," /")%>
                                </p>
                                <%}%>
                </div>
                <div style="width: 375px;">
                    <h1 style="text-align: right;">
                        Cotización
                    </h1>
                    <p style="margin: 0;text-align: right;"><b>Número de cotización:</b><%-reference%></p>
                    <p style="margin: 0;text-align: right;"><b>Vendedor:</b><%-`${user_name||""} ${user_middle_name||""}
                            ${user_last_name||""}`%></p>
                    <p style="margin: 0;text-align: right"><b>Dirección:</b><%-company_address%></p>
                </div>
            </div>
            <div>
                <!-- <h4>
                    <b>Dirección:</b>
                    N/A
                </h4> -->
                <!-- <h4>
                    <b>N. Móvil:</b>
                    N/A
                </h4> -->
            </div>
            <table width="100%">
                <thead style=<%-`"background-color: ${company_color||"#000"}"`%>>
                    <tr>
                        <td>
                            Sr
                        </td>
                        <td>
                            Número de Parte
                        </td>
                        <td>
                            Articulo
                        </td>
                        <td>
                            Descripción
                        </td>
                        <%if(includeBrand){%>
                            <td>
                                Marca
                            </td>
                            <%}%>
                                <td style="width:50px">
                                    Cantidad
                                </td>
                                <td>
                                    Tiempo de entrega
                                </td>
                                <td>
                                    Unidad
                                </td>
                                <td>
                                    Precio
                                </td>
                                <td>
                                    Total
                                </td>
                    </tr>
                </thead>
                <tbody>
                    <% for( let i=0; i < partitions.length; i++ ) { %>
                        <tr>
                            <td>
                                <%-i+1%>
                            </td>
                            <td>
                                <%-partitions[i].part_number%>
                            </td>
                            <td>
                                <%-partitions[i].partition_name%>
                            </td>
                            <td>
                                <%-partitions[i].description%>
                            </td>
                            <%if(includeBrand){%>
                                <td>
                                    <%-partitions[i].brand_name%>
                                </td>
                                <%}%>
                                    <td>
                                        <%-Number(partitions[i].quantity).toLocaleString('en')%>
                                    </td>
                                    <td>
                                        <%-partitions[i].edd%> días
                                    </td>
                                    <td>
                                        <%-partitions[i].unit%>
                                    </td>
                                    <td>
                                        <%-Number((1+partitions[i].factor /100 ) *
                                            partitions[i].cost).toLocaleString('en')%>
                                    </td>
                                    <td>
                                        <%-Number(((1+partitions[i].factor /100 ) *
                                            partitions[i].cost)*partitions[i].quantity).toLocaleString('en')%>
                                    </td>
                        </tr>
                        <% } %>
                </tbody>
            </table>
            <h3 style="text-align: right;"><b>Total:</b>
                <%-Number(total).toLocaleString('en')%> <%-currency%>
            </h3>
            <h3 style="text-align: right;"><b>Total Redondeado: </b>
                <%-Number(total).toLocaleString('en')%> <%-currency%>
            </h3>
            <p style="text-align: right;"><b>En palabras:</b>
                <%-currency%>
                    <%-totalInWords%>.
            </p>

            <p>Nota: Al generar su orden de compra favor de agregar este número de cotización.</p>
            <p>Esta cotización tiene vigencia de 15 días</p>
            <h3>Notas Importantes</h3>
            <p>Precios son en <%-currency%>. </p>
            <p>El tiempo de entrega esta sujeto a disponibilidad al momento de recibir su orden de compra y esta
                expresado en días hábiles. </p>
            <p>La generación de su orden de compra implica la aceptación de los términos y condiciones de esta
                cotización.</p>
        </body>

</html>